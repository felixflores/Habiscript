"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e={exports:{}};e.exports=function(){function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t){return c(t)?t:a(r({stylesObject:t}))}const n="__*__";function r({stylesObject:t,parentSelector:e="",cssObject:i={},nestedSelector:a=""}){if(Array.isArray(t)){const[r,s]=t,c=`${o(r)}:${s};`,l=a?i[a]=i[a]||{}:i,f=o(e||n);l[f]=(l[f]||"")+c}else Object.keys(t).forEach((c=>{const l=t[c];if(c.startsWith("@"))r({stylesObject:l,cssObject:i,nestedSelector:c});else if("object"!=typeof l){const t=`${o(c)}:${l};`,r=a?i[a]=i[a]||{}:i,s=o(e||n);r[s]=(r[s]||"")+t}else r({stylesObject:l,parentSelector:s(e,c),cssObject:i,nestedSelector:a})}));return i}function s(t,e){if(!t)return e;const n=i(t),r=i(e);return n.map((t=>r.map((e=>`${t}${e.startsWith(":")?"":" "}${e}`)).join(","))).join(",")}function o(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function i(t){return t.split(",").map((t=>t.trim()))}function a(t){return"object"!=typeof t||Array.isArray(t)||c(t)?t:Object.entries(t).map((([t,e])=>t===n?a(e):`${t}{${a(e)}}`)).join("")}function c(t){return!t||0===Object.keys(t).length}var l={style:e},f=t(l);return f}();var n=e.exports;const{style:r}=n,s=/\.[^.#]+/g,o=/#[^.#]+/;function i(t){let e={};return t.split(";").forEach((t=>{let[n,r]=t.split(":");n&&r&&(n=n.trim(),n=n.replace(/-./g,(t=>t.charAt(1).toUpperCase())),e[n]=r.trim())})),e}function a(t){if("string"==typeof t)return document.createTextNode(t);if(t instanceof Node)return t;const[e,...n]=t;let r,i={};if("string"!=typeof e)throw new Error("The first element of the habiscript array must be a string.");{r=e.split(/[#.]/)[0];const t=e.match(s),n=e.match(o);t&&(i.class=t.map((t=>t.substring(1))).join(" ")),n&&(i.id=n[0].substring(1))}n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])&&Object.assign(i,n.shift());return function(t,e={},n){const r=document.createElement(t);for(const[t,n]of Object.entries(e))if("style"===t&&"object"==typeof n)Object.assign(r.style,n);else if("function"==typeof n&&t.startsWith("on")){const e=t.substring(2).toLowerCase();r.addEventListener(e,n)}else void 0!==n&&r.setAttribute(t,n);for(const t of n)"string"==typeof t?r.appendChild(document.createTextNode(t)):t instanceof Node?r.appendChild(t):Array.isArray(t)&&r.appendChild(a(t));return r}(r,i,n.flatMap((t=>Array.isArray(t)?a(t):t)))}var c={habiToHtml:a,htmlToHabi:function t(e){if("string"==typeof e){return t((new DOMParser).parseFromString(e,"text/html").body.firstChild)}if(e.nodeType===Node.TEXT_NODE)return e.textContent;let n=e.tagName.toLowerCase();e.id&&(n+=`#${e.id}`),e.className&&(n+=`.${e.className.split(" ").join(".")}`);const r=[n],s={};for(const t of e.attributes)"class"!==t.name&&"id"!==t.name&&("style"===t.name?s.style=i(t.value):s[t.name]=t.value);Object.keys(s).length>0&&r.push(s);for(const n of e.childNodes)r.push(t(n));return r},toElement:function(t){return a(t)},style:function(t){return this.toElement(["style",r(t)])}},l=t(c);export{l as default};
