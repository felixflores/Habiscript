!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).nestml={})}(this,(function(e){"use strict";const t=/\.[^.#]+/g,n=/#[^.#]+/;function s(e,t={},n){const s=document.createElement(e);for(const[e,n]of Object.entries(t))if("style"===e&&"object"==typeof n)Object.assign(s.style,n);else if("function"==typeof n&&e.startsWith("on")){const t=e.substring(2).toLowerCase();s.addEventListener(t,n)}else void 0!==n&&s.setAttribute(e,n);for(const e of n)"string"==typeof e?s.appendChild(document.createTextNode(e)):e instanceof Node?s.appendChild(e):Array.isArray(e)&&s.appendChild(o(e));return s}function o(e){if("string"==typeof e)return document.createTextNode(e);if(e instanceof Node)return e;const[r,...i]=e;let a,f={};if("string"!=typeof r)throw new Error("The first element of the nestml array must be a string.");{a=r.split(/[#.]/)[0];const e=r.match(t),s=r.match(n);e&&(f.class=e.map((e=>e.substring(1))).join(" ")),s&&(f.id=s[0].substring(1))}i.length>0&&"object"==typeof i[0]&&!Array.isArray(i[0])&&Object.assign(f,i.shift());return s(a,f,i.flatMap((e=>Array.isArray(e)?o(e):e)))}e.classRegex=t,e.createElement=s,e.htmlToNestml=function e(t){if("string"==typeof t){return e((new DOMParser).parseFromString(t,"text/html").body.firstChild)}if(t.nodeType===Node.TEXT_NODE)return t.textContent;let n=t.tagName.toLowerCase();t.id&&(n+=`#${t.id}`),t.className&&(n+=`.${t.className.split(" ").join(".")}`);const s=[n],o={};for(const e of t.attributes)"class"!==e.name&&"id"!==e.name&&(o[e.name]=e.value);Object.keys(o).length>0&&s.push(o);for(const n of t.childNodes)s.push(e(n));return s},e.idRegex=n,e.nestmlToHtml=o}));
